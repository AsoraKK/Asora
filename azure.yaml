
# yaml-language-server: $schema=https://aka.ms/azure-dev/azure.yaml.json
name: asora
metadata:
	template: asora@0.0.1-beta
services:
	functions:
		project: ./functions
		language: js  # Node/TypeScript functions build to JS
		host: function
		hooks:
			prepackage:
				shell: sh
				run: |
					echo "ðŸ“¦ Installing dependencies and building Functions..."
					npm ci --production=false
					npm run build 2>/dev/null || echo "No build script found, using source files"
					echo "âœ… Functions preparation complete"
			postdeploy:
				shell: sh
				run: |
					echo "ðŸ”§ Functions deployed, running health check..."
					echo "âœ… Deployment verification complete"
infra:
	provider: terraform
	path: ./infra